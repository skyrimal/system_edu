<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>后台上移下移，编辑，删除效果</title>
    <link rel="stylesheet" type="text/css" href="/statics/css/wenjuan_ht.css">
    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" th:href="@{/statics/vendor/bootstrap/css/bootstrap.min.css}">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" th:href="@{/statics/vendor/font-awesome/css/font-awesome.min.css}">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" th:href="@{/statics/css/fontastic.css}">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" th:href="@{/statics/css/style.green.css}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" th:href="@{/statics/css/custom.css}">
    <!-- Favicon-->
    <link rel="shortcut icon" th:href="@{/statics/img/favicon.ico}">
    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body>
<h5>页面选项默认值从上到下为0-n</h5>

<div class="col-lg-6 bg-white">
    <div class="form d-flex align-items-center" style="background-color: #3ea6a4">
        <div class="content">
            <div class="form-group">
                <label for="titleName" class="label-material">&ensp;&ensp;问卷名</label>
                <input id="titleName" type="text" name="" class="input-material" style="background-color: #54e69d">
            </div>
            <div class="form-group">
                <label for="astractWord" class="label-material">&ensp;&ensp;简介</label>
                <input id="astractWord" type="text" name="" class="input-material" style="background-color: #54e69d">
            </div>
            <div class="form-group">
                <label class="label-material">&ensp;&ensp;问卷类型</label>
                <select id="qType" name="userType" class="faculty form-control mb-3" style="background-color: #54e69d">
                    <option value="">--请选择--</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </div>
        </div>
    </div>
</div>

<div class=" all_660">
    <div class="yd_box"></div>
    <div class="but" style="padding-top: 20px">
        <select id="addquerstions" class="addquerstions" name="">
            <option value="-1">添加问题</option>
            <option value="0">单选</option>
            <option value="1">多选</option>
            <option value="2">填空</option>
            <option value="3">矩阵</option>
        </select>
        <button id="submit">提交问题</button>
    </div>
    <!--选项卡区域  模板区域---------------------------------------------------------------------------------------------------------------------------------------->
    <div class="xxk_box">
        <div class="xxk_conn hide">
            <!--单选----------------------------------------------------------------------------------------------------------------------------------------->
            <div class="xxk_xzqh_box dxuan ">
                <textarea name="" cols="" rows="" class="input_wenbk btwen_text btwen_text_dx"
                          placeholder="单选题目"></textarea>
                <div class="title_itram">
                    <div class="kzjxx_iteam">
                        <input name="" type="radio" value="" class="dxk">
                        <input name="" type="text" class="input_wenbk" value="" placeholder="选项">
                        <label>
                            <input name="" type="checkbox" value="" class="fxk"> <span>可填空</span>
                        </label> <a href="javascript:void(0);" class="del_xm">删除</a>
                    </div>
                </div>
                <a href="javascript:void(0)" class="zjxx">增加选项</a>
                <!--完成编辑-->
                <div class="bjqxwc_box">
                    <a href="javascript:void(0);" class="qxbj_but">取消编辑</a>
                    <a href="javascript:void(0);" class="swcbj_but"> 完成编辑</a>
                </div>
            </div>
            <!--多选----------------------------------------------------------------------------------------------------------------------------------------->
            <div class="xxk_xzqh_box duoxuan hide">
                <textarea name="" cols="" rows="" class="input_wenbk btwen_text btwen_text_duox"
                          placeholder="多选题目"></textarea>
                <div class="title_itram">
                    <div class="kzjxx_iteam">
                        <input name="" type="checkbox" value="" class="dxk">
                        <input name="" type="text" class="input_wenbk" value="选项" placeholder="选项">
                        <label>
                            <input name="" type="checkbox" value="" class="fxk"> <span>可填空</span></label>
                        <a href="javascript:void(0);" class="del_xm">删除</a>
                    </div>
                </div>
                <a href="javascript:void(0)" class="zjxx">增加选项</a>
                <!--完成编辑-->
                <div class="bjqxwc_box">
                    <a href="javascript:void(0);" class="qxbj_but">取消编辑</a>
                    <a href="javascript:void(0);" class="swcbj_but"> 完成编辑</a>
                </div>
            </div>
            <!-- 填空----------------------------------------------------------------------------------------------------------------------------------------->
            <div class="xxk_xzqh_box tktm hide">
                <textarea name="" cols="" rows="" class="input_wenbk btwen_text btwen_text_tk"
                          placeholder="答题区"></textarea>
                <!--完成编辑-->
                <div class="bjqxwc_box">
                    <a href="javascript:void(0);" class="qxbj_but">取消编辑</a>
                    <a href="javascript:void(0);" class="swcbj_but"> 完成编辑</a>
                </div>
            </div>
            <!-- 矩阵----------------------------------------------------------------------------------------------------------------------------------------->
            <div class="xxk_xzqh_box  hide">
                <div class="line_dl"></div>
                <div class="jztm">
                    <textarea name="" cols="" rows="" class="input_wenbk btwen_text" placeholder="题目"></textarea>
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tbody>
                        <tr valign="top">
                            <td width="135">
                                <h4 class="ritwenz_xx">左标题</h4>
                                <textarea name="" cols="" rows="" class="leftbtwen_text"
                                          placeholder="例子：CCTV1，CCTV2，CCTV3"></textarea>
                            </td>
                            <td>
                                <h4 class="ritwenz_xx  ">
                                    右侧选项文字 <input type="radio" name="xz" value="0"
                                                  checked="checked" class="xzqk">单选<input
                                        type="radio" value="1" name="xz" class="xzqk">多选
                                </h4>
                                <div class="title_itram">
                                    <div class="kzjxx_iteam">
                                        <input name="" type="text" class="input_wenbk jzwent_input" value="选项"
                                               onBlur="if(!this.value)this.value='选项'"
                                               onClick="if(this.value&amp;&amp;this.value=='选项' )  this.value=''">
                                        <label>
                                            <input name="" type="checkbox" value="" class="fxk">
                                            <span>可填空</span></label> <a href="javascript:void(0);" class="del_xm">删除</a>
                                    </div>
                                    <div class="kzjxx_iteam">
                                        <input name="" type="text" class="input_wenbk jzwent_input" value="选项"
                                               onBlur="if(!this.value)this.value='选项'"
                                               onClick="if(this.value&amp;&amp;this.value=='选项' )  this.value=''">
                                        <label>
                                            <input name="" type="checkbox" value="" class="fxk">
                                            <span>可填空</span></label> <a href="javascript:void(0);" class="del_xm">删除</a>
                                    </div>
                                    <div class="kzjxx_iteam">
                                        <input name="" type="text" class="input_wenbk jzwent_input" value="选项"
                                               onBlur="if(!this.value)this.value='选项'"
                                               onClick="if(this.value&amp;&amp;this.value=='选项' )  this.value=''">
                                        <label>
                                            <input name="" type="checkbox" value="" class="fxk">
                                            <span>可填空</span></label> <a href="javascript:void(0);" class="del_xm">删除</a>
                                    </div>
                                </div>
                                <a href="javascript:void(0)" class="zjxx" style="margin-left: 0;">增加选项</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--完成编辑-->
                    <div class="bjqxwc_box">
                        <a href="javascript:void(0);" class="qxbj_but">取消编辑</a> <a href="javascript:void(0);"
                                                                                   class="swcbj_but"> 完成编辑</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    $(function () {
        $("#submit").click(function () {
            var q = [];
            var as = [];
            var qAndAss = [];

            $(".btwenzi").each(function (index, value) {
                q.push($(this).text()+",.,");
            });
            $(".tip_wz").each(function (index, value) {
                q[index] = q[index] + $(this).text();
                var a = [];
                $(this).parent().parent().parent().children().children(" label").children(" span").each(function (index, value) {
                    a.push($(this).text() + ",.," + (index));
                });
                as.push(a);
            });

            for (var i = 0; i < q.length; i++) {
                var qAndAs = {};
                qAndAs.question = q[i];
                qAndAs.answers = as[i];
                qAndAss.push(qAndAs);
            }
            var a = $("#titleName").val();
            var b = $("#astractWord").val();
            var c = $("#qType").children(" :selected").val();
            var msg = {};
            msg.titleName = a;
            msg.astractWord = b;
            msg.qType = c;
            console.info("a" + a);
            console.info("b" + b);
            console.info("c" + c);
            $.ajax({
                type: "POST",
                url: "/questionaier/addq",
                dataType: "json",
                traditional: true,
                data: {
                    "msg": JSON.stringify(msg),
                    "qAndAss": JSON.stringify(qAndAss),
                },
                success(d) {
                    console.info(d);
                    $(" body").html(d);
                }, error: function (XMLHttpRequest, textStatus, errorThrown) {
                    // 状态码
                    console.log(XMLHttpRequest.status);
                    // 状态
                    console.log(XMLHttpRequest.readyState);
                    window.location.replace("m_manage_questionnaire_qm");
                    // 错误信息
                    console.log(textStatus);
                }
            });

        })
    })
</script>
</html>
